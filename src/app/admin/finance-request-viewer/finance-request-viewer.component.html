<div class="flex-wrap md:flex-nowrap flex align-items-stretch  overview-bar fadeinup animation-linear">

  <div class="surface-card shadow-1 p-3 w-full mb-2 md:mb-0 md:w-6 md:mr-2 fadeinup animation-linear animation-duration-500 animation-delay-100">
    <div class="flex align-content-center justify-content-center mb-3 text-center">
      <div class="w-full lg:w-6 flex flex-wrap gap-4">
        <div class=" mt-3 w-full block">
          <div class="font-bold text-xl sm:text-2xl">
            {{this.chosenRequest?.Title}} {{this.chosenRequest?.FirstName}} {{this.chosenRequest?.LastName}}
          </div>
          <span class="block text-500 font-medium mb-1"
          >Reference No: {{this.chosenRequest?.ReferenceNo}}
          </span>
        </div>
        <div class=" w-full block">
          <div class="block font-medium mb-1 text-lg"
          >Mobile: {{this.chosenRequest?.Mobile}}
          </div>
        </div>
        <div class=" w-full block">
          <div class="block font-medium mb-1 text-lg"
          >Email: {{this.chosenRequest?.Email}}
          </div>
        </div>
        <div class=" w-full block">
          <div class="block font-medium mb-1 text-lg"
          >Date Of Birth: {{this.chosenRequest?.DateOfBirth | date: 'mediumDate'}}
          </div>
        </div>
        <div class=" w-full block">
          <div class="block font-medium mb-1 text-lg"
          >Date Of Application: {{this.chosenRequest?.DateOfApplication | date: 'mediumDate'}}
          </div>
        </div>
        <div class=" w-full block">
          <div class="block font-medium mb-1 text-lg"
          >Finance Amount: ${{this.chosenRequest?.AmountRequired | number: '1.2'}}
          </div>
          <span class="block text-500 font-medium mb-1"
          >Payment Over {{this.chosenRequest?.Term * 3}} Months
          </span>
        </div>
        <div class=" w-full block">
          <div class="block font-medium mb-1 text-lg"
          >Chosen Product: {{this.chosenRequest?.FinanceProduct?.Title}}
          </div>
          <span class="block text-500 font-medium mb-1"
          >With An Interest Rate Of: {{this.chosenRequest?.FinanceProduct?.InterestRate * 10 | number: '1.4'}}%
          </span>
        </div>
        <div class=" w-full block">
          <div class="block font-medium mb-1 text-lg"
          >Repayments From: ${{this.chosenRequest?.MonthlyRepayment? this.chosenRequest?.MonthlyRepayment: 0 | number: '1.2'}}
          </div>
          <span class="block text-500 font-medium mb-1"
          >Monthly
          </span>
        </div>
        <div class=" w-full block">
          <div class="block font-medium mb-1 text-lg"
          >Total Payment: ${{this.chosenRequest?.TotalRepayment? this.chosenRequest?.TotalRepayment: 0 | number: '1.2'}}
          </div>
          <span class="block text-500 font-medium mb-1"
          >Including A $300 Establishment Fee
          </span>
        </div>
      </div>
    </div>
  </div>




  <div class="surface-card shadow-1 p-3 w-full mb-2 md:mb-0 md:w-6 md:ml-2 fadeinup animation-linear animation-duration-500 animation-delay-100">
    <div class="font-bold text-xl sm:text-2xl mt-3 mb-6">History</div>

    <div class="flex w-full h-24rem overflow-y-scroll">
      <p-timeline [value]="chosenRequestHistory?.items! ?? []" class="log-timeline">
        <ng-template pTemplate="marker" let-icon>
          <ng-container *ngIf="icon.Title.includes('Creation'), else pending">

              <i class="fa-solid fa-circle-plus"></i>

          </ng-container>

          <ng-template #pending>
            <ng-container *ngIf="icon.Title.includes('Pending'), else submission">
              <i class="fa-solid fa-circle-p"></i>
            </ng-container>

          </ng-template>

          <ng-template #submission>
            <ng-container *ngIf="icon.Title.includes('Submission'), else approved">
              <i class="fa-solid fa-circle-up"></i>
            </ng-container>

          </ng-template>

          <ng-template #approved>
            <ng-container *ngIf="icon.Title.includes('Approved'), else denied">
              <i class="fa-solid fa-circle-check"></i>
            </ng-container>
          </ng-template>

          <ng-template #denied>
            <ng-container *ngIf="icon.Title.includes('Denied'), else update">
              <i class="fa-sharp fa-solid fa-circle-xmark"></i>
            </ng-container>

          </ng-template>

          <ng-template #update>
            <i class="fa-solid fa-circle-u"></i>

          </ng-template>

        </ng-template>
        <ng-template pTemplate="content" let-log>



          <div class="flex-column p-3 log-info mb-2">
            <div class="text-md">
              {{log.Title}}
            </div>

            <div class="text-xs text-500 mb-2">
              {{log.Description}}
            </div>

              <div class="text-sm text-700 mb-2">
                {{log.Content}}
              </div>


            <div class="text-sm mb-1">{{log.DateCreated | date: 'mediumDate'}}</div>


          </div>
        </ng-template>
      </p-timeline>
    </div>

    <p-paginator
      [showPageLinks]="!(medBreakpoint | async)?.matches"
      [rows]="5"
      [totalRecords]="chosenRequestHistory.totalCount"
      #financeRequestLogspaginator
      (onPageChange)="getFinanceRequestsHistory(financeRequestLogspaginator.rows*financeRequestLogspaginator.getPage())"
    ></p-paginator>

  </div>
</div>


<div class="flex justify-content-end mt-4">

  <span class="text-600 text-lg font-bold font-italic">*Warning these features are admin only and will be affected by least privilage access on further iterations</span>

  <button class="mx-4" id="submitBtn1" pButton label="Admin Insert Log" type="submit"></button>
  <button id="submitBtn2" pButton label="Admin Update Ticket" type="submit"></button>
</div>
